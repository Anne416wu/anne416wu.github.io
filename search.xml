<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mac上Haskell的安装环境搭建</title>
      <link href="/posts/32573/"/>
      <url>/posts/32573/</url>
      
        <content type="html"><![CDATA[<p>Mac上Haskell的换源和安装</p><a id="more"></a><blockquote><p>参考文章：<a href="https://www.jianshu.com/p/d86fec07856d" rel="external nofollow noreferrer">vscode搭建haskell环境</a></p><p>文章针对的是旧版本的stack，无脑照抄会出问题</p></blockquote><h2 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h2><blockquote><p><a href="https://docs.haskellstack.org/en/stable/README/" rel="external nofollow noreferrer">stack官方安装指导</a></p><p>Installing GHC automatically, in an isolated location.<br>Installing packages needed for your project.<br>Building your project.<br>Testing your project.<br>Benchmarking your project</p></blockquote><p>正如官网所说，直接安装stack的好处是它自带Haskell的编译器GHC和Cabal(a system for building and packaging Haskell libraries and programs)等Heskell运行需要文件(个人觉得stack类似anaconda，环境管理+包管理工具)。但是国内安装不换源的话，搭建之路会很不顺利</p><ol><li><p>使用brew安装stack</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew search haskell</span><br></pre></td></tr></table></figure><p>可以看到brew返回了两个结果，一个是Formulae下的haskell-brew，另一个是Cask类型下的<a href="http://haskellformac.com" rel="external nofollow noreferrer">haskell-for-mac</a>，后者是个IDE，使用<code>brew cask install haskell-for-mac</code>下载，但是下载的过程太长，不知道到底是什么样，我们还是按照教程里的方法下载stack</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install haskell-stack</span><br></pre></td></tr></table></figure></li><li><p>换源</p><p>这个时候如果按照stack官网的指示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stack new my-project</span><br><span class="line"><span class="built_in">cd</span> my-project</span><br><span class="line">stack setup</span><br><span class="line">stack build</span><br><span class="line">stack <span class="built_in">exec</span> my-project-exe</span><br></pre></td></tr></table></figure><p>很可能卡在setup步骤</p><p>第一种错误是返回Connection Failure，开全局VPN也没用那种。根据我在stackOverflow查到的信息，主要原因可能是路由器认为该地址是不良链接，拒绝了访问，无脑解决方法是直接手机开热点</p><p>第二种错误是执行stack setup之后一直卡在<code>ghc-8.8.2: dowanload has begun</code>其实就是原本的下载源在国外，所以下载速度起不来，所以我们要换<a href="https://mirrors.tuna.tsinghua.edu.cn/help/stackage/" rel="external nofollow noreferrer">清华的镜像源</a></p><p>要换的源涉及两个文件：<code>~/.cable/config</code> <code>~/.stack/config.yaml</code></p><p>首先换stack(<a href="https://mirrors.tuna.tsinghua.edu.cn/help/stackage/" rel="external nofollow noreferrer">stackage镜像使用帮助</a>)和stack setup(<a href="https://mirrors.tuna.tsinghua.edu.cn/help/hackage/" rel="external nofollow noreferrer">hackage镜像使用帮助</a>)的源，stack版本在2.1.1以上和以下不一样，这里只写2.1.1以上版本：</p><ul><li><p>打开~/.stack/config.yaml，加上：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">setup-info:</span> <span class="string">"http://mirrors.tuna.tsinghua.edu.cn/stackage/stack-setup.yaml"</span></span><br><span class="line"><span class="attr">urls:</span></span><br><span class="line">  <span class="attr">latest-snapshot:</span> <span class="string">http://mirrors.tuna.tsinghua.edu.cn/stackage/snapshots.json</span></span><br><span class="line"><span class="attr">package-indices:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">download-prefix:</span> <span class="string">http://mirrors.tuna.tsinghua.edu.cn/hackage/</span></span><br><span class="line">    <span class="attr">hackage-security:</span></span><br><span class="line">        <span class="attr">keyids:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">0a5c7ea47cd1b15f01f5f51a33adda7e655bc0f0b0615baa8e271f4c3351e21d</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">1ea9ba32c526d1cc91ab5e5bd364ec5e9e8cb67179a471872f6e26f0ae773d42</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">280b10153a522681163658cb49f632cde3f38d768b736ddbc901d99a1a772833</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">2a96b1889dc221c17296fcc2bb34b908ca9734376f0f361660200935916ef201</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">2c6c3627bd6c982990239487f1abd02e08a02e6cf16edb105a8012d444d870c3</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">51f0161b906011b52c6613376b1ae937670da69322113a246a09f807c62f6921</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">772e9f4c7db33d251d5c6e357199c819e569d130857dc225549b40845ff0890d</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">aa315286e6ad281ad61182235533c41e806e5a787e0b6d1e7eef3f09d137d2e9</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">fe331502606802feac15e514d9b9ea83fee8b6ffef71335479a2e68d84adc6b0</span></span><br><span class="line">        <span class="attr">key-threshold:</span> <span class="number">3</span> <span class="comment"># number of keys required</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ignore expiration date, see https://github.com/commercialhaskell/stack/pull/4614</span></span><br><span class="line">        <span class="attr">ignore-expiry:</span> <span class="literal">no</span></span><br></pre></td></tr></table></figure></li></ul><p>现在换cabal的源</p><ul><li><p>在终端执行<code>cabal update</code>后<code>Ctrl+C</code>停止, 然后进行下一步。报错没关系，这一步的目的是生成<code>~/.cabal/config</code>配置文件</p></li><li><p>打开<code>~/.cabal/config</code> ，加入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">repository</span> <span class="string">mirrors.tuna.tsinghua.edu.cn</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">http://mirrors.tuna.tsinghua.edu.cn/hackage</span></span><br></pre></td></tr></table></figure><p>为了速度，可以将官方仓库注释掉。实际有朋友反应他的配置文件中本身就没有官方仓库这一行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">--</span> <span class="string">repository</span> <span class="string">hackage.haskell.org</span></span><br><span class="line"> <span class="string">--</span> <span class="attr">url:</span> <span class="string">http://hackage.haskell.org/</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>现在可以愉快地按照<a href="https://docs.haskellstack.org/en/stable/README/" rel="external nofollow noreferrer">stack官方安装指导</a> 中的步骤继续了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   stack new my-project</span><br><span class="line">   <span class="built_in">cd</span> my-project</span><br><span class="line">stack setup</span><br><span class="line">   stack build</span><br><span class="line">stack <span class="built_in">exec</span> my-project-exe</span><br></pre></td></tr></table></figure></li><li><p>或者像puthon一样在终端运行.hs文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">runhaskell filename</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">runhs filename</span><br></pre></td></tr></table></figure></li></ol><h2 id="Hs学习笔记"><a href="#Hs学习笔记" class="headerlink" title="Hs学习笔记"></a>Hs学习笔记</h2><p>&lt;–To be Continued–&gt;</p><blockquote><p><a href="https://www.w3cschool.cn/hsriti/" rel="external nofollow noreferrer">https://www.w3cschool.cn/hsriti/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Guide </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Haskell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>编译原理与设计-Lab1-语言认知实验</title>
      <link href="/posts/53125/"/>
      <url>/posts/53125/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p>分别使用 C/C++、Java、Python 和 Haskell 实现快速排序和归并排序算法，对采用这几种语言实现的编程效率，程序的规模，程序的运行效率进行对比分析。</p></blockquote><a id="more"></a><h1 id="编译原理与设计-Lab1-语言认知实验"><a href="#编译原理与设计-Lab1-语言认知实验" class="headerlink" title="编译原理与设计-Lab1-语言认知实验"></a>编译原理与设计-Lab1-语言认知实验</h1><h2 id="1-实验目的和内容"><a href="#1-实验目的和内容" class="headerlink" title="1 实验目的和内容"></a>1 实验目的和内容</h2><ul><li>实验目的：了解程序设计语言的发展历史，了解不同程序设计语言的各自特点;感受编 译执行和解释执行两种不同的执行方式，初步体验语言对编译器设计的影响，为 后续编译程序的设计和开发奠定良好的基础。</li><li>实验内容： 分别使用 C/C++、Java、Python 和 Haskell 实现快速排序算法和归并排序，对采用这几种语言实现的编程效率，程序的规模，程序的运行效率进行对比分析。</li><li>实验说明：实验使用电脑参数如下<img src="%E6%88%AA%E5%B1%8F2020-02-2217.13.04.png" alt="电脑参数"></li></ul><h2 id="2-实验的具体过程和步骤"><a href="#2-实验的具体过程和步骤" class="headerlink" title="2 实验的具体过程和步骤"></a>2 实验的具体过程和步骤</h2><ul><li><p>实验分三组：</p><ul><li>普通情况(50000个范围在1~100000的不重复数)下不同语言的归并排序和快速排序</li><li>最坏情况：<ul><li>小规模组(1000-&gt;1逆序排列) </li><li>大规模组(10000-&gt;1逆序排列)</li></ul></li></ul></li><li><p>快速排序的算法采用三数取最小数的算法，平均时间复杂度 $ O(nlogn) $ ，最坏时间复杂度 $ O(n^2) $</p></li><li><p>归并排序无论最好最坏情况，时间复杂度均为 $ O(nlog_2n) $ </p></li><li><p>不同语言所使用的的算法完全一致，时间函数分别使用各语言提供的库函数</p><h3 id="C语言"><a href="#C语言" class="headerlink" title="C语言"></a>C语言</h3></li></ul><ol><li>编译器版本及运行环境</li></ol>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   $ gcc --version</span><br><span class="line">   Apple clang version 11.0.0 (clang-1100.0.33.17)</span><br><span class="line">Target: x86_64-apple-darwin19.3.0</span><br></pre></td></tr></table></figure><ol start="2"><li><p>源代码</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1000 <span class="comment">//50000为实验1规模，10000为实验2-1规模，1000为实验2-2规模</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> O 2 <span class="comment">//1为装填out.txt中的数据，2为装填逆序数组</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//归并函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Merge</span><span class="params">(<span class="keyword">int</span> *num, <span class="keyword">int</span> start, <span class="keyword">int</span> mid, <span class="keyword">int</span> <span class="built_in">end</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *temp = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>((<span class="built_in">end</span>-start+<span class="number">1</span>) * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="keyword">int</span> i = start;</span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= <span class="built_in">end</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (num[i] &lt;= num[j])&#123;</span><br><span class="line">            temp[k++] = num[i++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            temp[k++] = num[j++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid)&#123;</span><br><span class="line">        temp[k++] = num[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= <span class="built_in">end</span>)&#123;</span><br><span class="line">        temp[k++] = num[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">        num[start + i] = temp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//归并排序</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort_UptoDown</span><span class="params">(<span class="keyword">int</span> *num, <span class="keyword">int</span> start, <span class="keyword">int</span> <span class="built_in">end</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = start + (<span class="built_in">end</span> - start) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &gt;= <span class="built_in">end</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    MergeSort_UptoDown(num, start, mid);</span><br><span class="line">    MergeSort_UptoDown(num, mid + <span class="number">1</span>, <span class="built_in">end</span>);</span><br><span class="line"></span><br><span class="line">    Merge(num, start, mid, <span class="built_in">end</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分解函数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    key = arr[low];</span><br><span class="line">    <span class="keyword">while</span>(low&lt;high)&#123;</span><br><span class="line">        <span class="keyword">while</span>(low &lt;high &amp;&amp; arr[high]&gt;= key )</span><br><span class="line">            high--;</span><br><span class="line">        <span class="keyword">if</span>(low&lt;high)</span><br><span class="line">            arr[low++] = arr[high];</span><br><span class="line">        <span class="keyword">while</span>( low&lt;high &amp;&amp; arr[low]&lt;=key )</span><br><span class="line">            low++;</span><br><span class="line">        <span class="keyword">if</span>(low&lt;high)</span><br><span class="line">            arr[high--] = arr[low];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[low] = key;</span><br><span class="line">    <span class="keyword">return</span> low;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//快速排序</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> start, <span class="keyword">int</span> <span class="built_in">end</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pos;</span><br><span class="line">    <span class="keyword">if</span> (start&lt;<span class="built_in">end</span>)&#123;</span><br><span class="line">        pos = partition(arr, start, <span class="built_in">end</span>);</span><br><span class="line">        quick_sort(arr,start,pos<span class="number">-1</span>);</span><br><span class="line">        quick_sort(arr,pos+<span class="number">1</span>,<span class="built_in">end</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装填函数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fill</span><span class="params">(<span class="keyword">int</span> arr[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(O==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        FILE *fp = <span class="literal">NULL</span>;</span><br><span class="line">        fp = fopen(<span class="string">"/Users/apple/Downloads/out.txt"</span>,<span class="string">"r"</span>);</span><br><span class="line">        <span class="keyword">char</span> buff[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">fscanf</span>(fp,<span class="string">"%s"</span>,buff)!=EOF)&#123;</span><br><span class="line">        arr[cnt++]=atoi(buff);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i] = N - i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[N+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> num = <span class="built_in">fill</span>(arr);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">begintime</span>,<span class="title">endtime</span>;</span></span><br><span class="line">    gettimeofday(&amp;begintime, <span class="literal">NULL</span>);</span><br><span class="line">    quick_sort(arr , <span class="number">0</span> , num<span class="number">-1</span>);</span><br><span class="line">    gettimeofday(&amp;endtime, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Size-%d / "</span>, num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Qsort-C Running Time : %ld ms\n"</span>,<span class="number">1000</span>*(endtime.tv_sec-begintime.tv_sec)+(endtime.tv_usec-begintime.tv_usec)/<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    num = <span class="built_in">fill</span>(arr);</span><br><span class="line">    gettimeofday(&amp;begintime, <span class="literal">NULL</span>);</span><br><span class="line">    MergeSort_UptoDown(arr , <span class="number">0</span> , num<span class="number">-1</span>);</span><br><span class="line">    gettimeofday(&amp;endtime, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Size-%d / "</span>, num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Mergesort-C Running Time : %ld ms\n"</span>,<span class="number">1000</span>*(endtime.tv_sec-begintime.tv_sec)+(endtime.tv_usec-begintime.tv_usec)/<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用gcc编译器生成可执行文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o lab1_c lab1.c</span><br></pre></td></tr></table></figure></li><li><p>在终端运行可执行文件6次</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/.lab1_c</span><br></pre></td></tr></table></figure></li></ol><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><ol><li><p>编译器版本及运行环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   $ Javac --version</span><br><span class="line">   javac 10.0.2</span><br><span class="line">   $ java --version</span><br><span class="line">   openjdk 10.0.2 2018-07-17</span><br><span class="line">   OpenJDK Runtime Environment 18.3 (build 10.0.2+13)</span><br><span class="line">OpenJDK 64-Bit Server VM 18.3 (build 10.0.2+13, mixed mode)</span><br></pre></td></tr></table></figure></li><li><p>源代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lab1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> O = <span class="number">2</span>; <span class="comment">//1为装填out.txt中的数据，2为装填逆序数组</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">10000</span>; <span class="comment">//50000为实验1规模，10000为实验2-1规模，1000为实验2-2规模</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fill</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (O==<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> cnt =<span class="number">0</span>;</span><br><span class="line">            String pathname = <span class="string">"/Users/apple/Downloads/out.txt"</span>;</span><br><span class="line">            <span class="keyword">try</span> (FileReader reader = <span class="keyword">new</span> FileReader(pathname);</span><br><span class="line">                BufferedReader br = <span class="keyword">new</span> BufferedReader(reader)</span><br><span class="line">            )&#123;</span><br><span class="line">                String line;</span><br><span class="line">                <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                arr[cnt++]=Integer.parseInt(line);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++) &#123;</span><br><span class="line">                arr[i] = N-i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        print5();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print5</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        fill(arr);</span><br><span class="line">        <span class="keyword">long</span> t = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// System.out.println(arr[0]+" "+arr[N/2]+" "+arr[N-1]);</span></span><br><span class="line">        quick_sort(arr,<span class="number">0</span> , N-<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// System.out.println(arr[0]+" "+arr[N/2]+" "+arr[N-1]);</span></span><br><span class="line">        System.out.println(<span class="string">"QSort-Size-"</span>+N+<span class="string">" / Java Running time : "</span>+(System.currentTimeMillis()-t)+<span class="string">" ms"</span>);</span><br><span class="line"></span><br><span class="line">        fill(arr);</span><br><span class="line">        <span class="comment">// System.out.println(arr[0]+" "+arr[N/2]+" "+arr[N-1]);</span></span><br><span class="line">        t = System.currentTimeMillis();</span><br><span class="line">        m_sort(arr,<span class="number">0</span> , N-<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// System.out.println(arr[0]+" "+arr[N/2]+" "+arr[N-1]);</span></span><br><span class="line">        System.out.println(<span class="string">"MergeSort-Size-"</span>+N+<span class="string">" / Java Running time : "</span>+(System.currentTimeMillis()-t)+<span class="string">" ms"</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//分解函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span> <span class="params">(<span class="keyword">int</span> []arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    key = arr[low];</span><br><span class="line">    <span class="keyword">while</span>(low&lt;high)&#123;</span><br><span class="line">        <span class="keyword">while</span>(low &lt;high &amp;&amp; arr[high]&gt;= key )</span><br><span class="line">            high--;</span><br><span class="line">        <span class="keyword">if</span>(low&lt;high)</span><br><span class="line">            arr[low++] = arr[high];</span><br><span class="line">        <span class="keyword">while</span>( low&lt;high &amp;&amp; arr[low]&lt;=key )</span><br><span class="line">            low++;</span><br><span class="line">        <span class="keyword">if</span>(low&lt;high)</span><br><span class="line">            arr[high--] = arr[low];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[low] = key;</span><br><span class="line">    <span class="keyword">return</span> low;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//快速排序</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> []arr, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pos;</span><br><span class="line">        <span class="keyword">if</span> (start&lt;end)&#123;</span><br><span class="line">            pos = partition(arr, start, end);</span><br><span class="line">            quick_sort(arr,start,pos-<span class="number">1</span>);</span><br><span class="line">            quick_sort(arr,pos+<span class="number">1</span>,end);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//归并排序</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] m_sort(<span class="keyword">int</span>[] a,<span class="keyword">int</span> low,<span class="keyword">int</span> high)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (low+high)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(low&lt;high)&#123;</span><br><span class="line">            m_sort(a,low,mid);</span><br><span class="line">            m_sort(a,mid+<span class="number">1</span>,high);</span><br><span class="line">            <span class="comment">//左右归并</span></span><br><span class="line">            merge(a,low,mid,high);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">//合并函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> low, <span class="keyword">int</span> mid, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[high-low+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> i= low;</span><br><span class="line">        <span class="keyword">int</span> j = mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 把较小的数先移到新数组中</span></span><br><span class="line">        <span class="keyword">while</span>(i&lt;=mid &amp;&amp; j&lt;=high)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&lt;a[j])&#123;</span><br><span class="line">                temp[k++] = a[i++];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                temp[k++] = a[j++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 把左边剩余的数移入数组 </span></span><br><span class="line">        <span class="keyword">while</span>(i&lt;=mid)&#123;</span><br><span class="line">            temp[k++] = a[i++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 把右边边剩余的数移入数组</span></span><br><span class="line">        <span class="keyword">while</span>(j&lt;=high)&#123;</span><br><span class="line">            temp[k++] = a[j++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 把新数组中的数覆盖nums数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;temp.length;x++)&#123;</span><br><span class="line">            a[x+low] = temp[x];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用java编译器(javac.exe)编译为字节码文件(.class)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac Lab1.java</span><br></pre></td></tr></table></figure></li><li><p>运行生成的字节码文件6次</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java Lab1</span><br></pre></td></tr></table></figure></li></ol><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><ol><li><p>解释器版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python --version</span><br><span class="line">Python 2.7.16</span><br></pre></td></tr></table></figure></li><li><p>源代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.setrecursionlimit(<span class="number">100000</span>)</span><br><span class="line"></span><br><span class="line">O = <span class="number">1</span>  //<span class="number">1</span>为装填out.txt中的数据，<span class="number">2</span>为装填逆序数组</span><br><span class="line">N = <span class="number">50000</span>  //<span class="number">50000</span>为实验<span class="number">1</span>规模，<span class="number">10000</span>为实验<span class="number">2</span><span class="number">-1</span>规模，<span class="number">1000</span>为实验<span class="number">2</span><span class="number">-2</span>规</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(arr, l, m, r)</span>:</span> </span><br><span class="line">    n1 = m - l + <span class="number">1</span></span><br><span class="line">    n2 = r- m </span><br><span class="line">    L = [<span class="number">0</span>] * (n1)</span><br><span class="line">    R = [<span class="number">0</span>] * (n2)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span> , n1): </span><br><span class="line">        L[i] = arr[l + i] </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span> , n2): </span><br><span class="line">        R[j] = arr[m + <span class="number">1</span> + j] </span><br><span class="line">  </span><br><span class="line">    i=<span class="number">0</span></span><br><span class="line">    j=<span class="number">0</span></span><br><span class="line">    k=l</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> i &lt; n1 <span class="keyword">and</span> j &lt; n2 : </span><br><span class="line">        <span class="keyword">if</span> L[i] &lt;= R[j]: </span><br><span class="line">            arr[k] = L[i] </span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>: </span><br><span class="line">            arr[k] = R[j] </span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> i &lt; n1: </span><br><span class="line">        arr[k] = L[i] </span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> j &lt; n2: </span><br><span class="line">        arr[k] = R[j] </span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mergeSort</span><span class="params">(arr,l,r)</span>:</span> </span><br><span class="line">    <span class="keyword">if</span> l &lt; r: </span><br><span class="line">  </span><br><span class="line">        </span><br><span class="line">        m = int((l+(r<span class="number">-1</span>))/<span class="number">2</span>)</span><br><span class="line">  </span><br><span class="line">       </span><br><span class="line">        mergeSort(arr, l, m) </span><br><span class="line">        mergeSort(arr, m+<span class="number">1</span>, r) </span><br><span class="line">        merge(arr, l, m, r) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(arr,low,high)</span>:</span></span><br><span class="line">key = arr[low]</span><br><span class="line"><span class="keyword">while</span>(low&lt;high):</span><br><span class="line"><span class="keyword">while</span> low&lt;high <span class="keyword">and</span> arr[high] &gt;= key:</span><br><span class="line">high-=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> low&lt;high:</span><br><span class="line">arr[low] = arr[high]</span><br><span class="line">low+=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> low&lt;high <span class="keyword">and</span> arr[low]&lt;=key:</span><br><span class="line">low+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> low&lt;high:</span><br><span class="line">arr[high] = arr[low]</span><br><span class="line">high -= <span class="number">1</span></span><br><span class="line">arr[low] = key</span><br><span class="line"><span class="keyword">return</span> low</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">q_sort</span><span class="params">(arr,start,end)</span>:</span></span><br><span class="line"><span class="keyword">if</span> start&lt;end:</span><br><span class="line">pos = partition(arr,start,end)</span><br><span class="line">q_sort(arr,start,pos<span class="number">-1</span>)</span><br><span class="line">q_sort(arr,pos+<span class="number">1</span>,end)</span><br><span class="line"><span class="keyword">return</span> arr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span><span class="params">(arr)</span>:</span></span><br><span class="line"><span class="keyword">return</span> q_sort(arr,<span class="number">0</span>,len(arr)<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">do</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span>(O==<span class="number">1</span>)</span><br><span class="line">      arr=[] <span class="comment">#直接使用out.txt内数据初始化</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> xrange(<span class="number">1</span>,N):</span><br><span class="line">            arr[i]=N-x;</span><br><span class="line">begintime=time.time()</span><br><span class="line">quick_sort(arr)</span><br><span class="line">endtime = time.time()</span><br><span class="line">Running_time = (endtime-begintime)*<span class="number">1000</span></span><br><span class="line">print(<span class="string">"Qsort-python Running time : %f ms"</span>%Running_time)</span><br><span class="line"></span><br><span class="line">begintime=time.time()</span><br><span class="line">mergeSort(arr,<span class="number">0</span>,len(arr)<span class="number">-1</span>)</span><br><span class="line">endtime = time.time()</span><br><span class="line">Running_time = (endtime-begintime)*<span class="number">1000</span></span><br><span class="line">print(<span class="string">"Msort-python Running time : %f ms"</span>%Running_time)</span><br><span class="line"></span><br><span class="line">arr = [<span class="number">0</span>]*N</span><br><span class="line">do()</span><br></pre></td></tr></table></figure></li><li><p>在终端运行6次</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python lab1.py</span><br></pre></td></tr></table></figure></li></ol><h3 id="Haskell"><a href="#Haskell" class="headerlink" title="Haskell"></a>Haskell</h3><ol><li><p>解释器版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ runhaskell --version</span><br><span class="line">runghc 8.8.2</span><br></pre></td></tr></table></figure></li><li><p>源代码</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Text.Printf</span><br><span class="line"><span class="keyword">import</span> Control.Exception</span><br><span class="line"><span class="keyword">import</span> System.CPUTime</span><br><span class="line"></span><br><span class="line"><span class="title">msort</span> :: (<span class="type">Ord</span> a) =&gt; [a] -&gt; [a]</span><br><span class="line"><span class="title">msort</span> [] = []</span><br><span class="line"><span class="title">msort</span> [x] = [x]</span><br><span class="line"><span class="title">msort</span> xs = merge (msort xs1) (msort xs2)</span><br><span class="line">  <span class="keyword">where</span> k = (length xs) `div` <span class="number">2</span></span><br><span class="line">        xs1 = take k xs</span><br><span class="line">        xs2 = drop k xs</span><br><span class="line"></span><br><span class="line">        merge :: (<span class="type">Ord</span> a) =&gt; [a] -&gt; [a] -&gt; [a]</span><br><span class="line">        merge [] b = b </span><br><span class="line">        merge a [] = a</span><br><span class="line">        merge a@(x:xs) b@(y:ys) | x &gt;= y    = x:(merge xs b)</span><br><span class="line">                                | otherwise = y:(merge a ys)</span><br><span class="line"></span><br><span class="line"><span class="title">qsort</span> :: (<span class="type">Ord</span> a) =&gt; [a] -&gt; [a]</span><br><span class="line"><span class="title">qsort</span> [] = []</span><br><span class="line"><span class="title">qsort</span> (x:xs) = qsort [i | i &lt;- xs, i &gt;= x]</span><br><span class="line">  ++ [x]</span><br><span class="line">  ++ qsort [i | i &lt;- xs, i &lt; x]</span><br><span class="line"></span><br><span class="line"><span class="title">main</span>=<span class="keyword">do</span></span><br><span class="line">    start &lt;- getCPUTime</span><br><span class="line">    <span class="keyword">let</span> list =msort [] <span class="comment">--实验1直接填入out.txt中数组，实验2-1为[1..1000]，实验2.2为[1..10000]</span></span><br><span class="line">    <span class="keyword">let</span> a = maximum list</span><br><span class="line">    printf <span class="string">"Size %d "</span>(a::<span class="type">Int</span>)</span><br><span class="line">    end   &lt;- getCPUTime</span><br><span class="line">    <span class="keyword">let</span> diff = (fromIntegral (end - start)) / (<span class="number">10</span>^<span class="number">9</span>)</span><br><span class="line">    printf <span class="string">"qsort Haskell Running time: %0.3f ms\n"</span> (diff :: <span class="type">Double</span>)</span><br><span class="line"></span><br><span class="line">    start &lt;- getCPUTime</span><br><span class="line">    <span class="keyword">let</span> list =qsort [] <span class="comment">--实验1直接填入out.txt中数组，实验2-1为[1..1000]，实验2.2为[1..10000]</span></span><br><span class="line">    <span class="keyword">let</span> a = maximum list</span><br><span class="line">    printf <span class="string">"Size %d "</span>(a::<span class="type">Int</span>)</span><br><span class="line">    end   &lt;- getCPUTime</span><br><span class="line">    <span class="keyword">let</span> diff = (fromIntegral (start - end)) / (<span class="number">10</span>^<span class="number">9</span>)</span><br><span class="line">    printf <span class="string">"msort Haskell Running time: %0.3f ms\n"</span> (diff :: <span class="type">Double</span>)</span><br></pre></td></tr></table></figure></li><li><p>在终端运行6次</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runhaskell lab1.hs</span><br></pre></td></tr></table></figure></li></ol><h2 id="3-运行效果截图"><a href="#3-运行效果截图" class="headerlink" title="3 运行效果截图"></a>3 运行效果截图</h2><h3 id="1-常规组"><a href="#1-常规组" class="headerlink" title="1 常规组"></a>1 常规组</h3><blockquote><p>50000个范围在1~1000000的不重复数</p></blockquote><h4 id="C"><a href="#C" class="headerlink" title="C"></a>C</h4><img src="Screenshot2020-02-2616.50.19.png" alt="C" style="zoom:50%;" /><ul><li><p>快速排序平均运行时间：6.00 ms</p></li><li><p>归并排序平均运行时间：13.33 ms</p></li></ul><h4 id="JAVA"><a href="#JAVA" class="headerlink" title="JAVA"></a>JAVA</h4><img src="Screenshot2020-02-2616.52.32.png" alt="java" style="zoom: 50%;" /><ul><li><p>快速排序平均运行时间：14.00 ms</p></li><li><p>归并排序平均运行时间：16.33 ms</p></li></ul><h4 id="python-1"><a href="#python-1" class="headerlink" title="python"></a>python</h4><img src="Screenshot2020-02-2616.55.17.png" alt="python" style="zoom:50%;" /><ul><li><p>快速排序平均运行时间：88.26 ms</p></li><li><p>归并排序平均运行时间：244.45  ms</p></li></ul><h4 id="Haskell-1"><a href="#Haskell-1" class="headerlink" title="Haskell"></a>Haskell</h4><blockquote><p>因为笔者失误，此处Size应为50000，msort和qsort对应时间输出交换，即第一行为qsort运行时间，第二行为msort运行时间</p></blockquote><img src="Screenshot2020-02-2616.59.54.png" alt="haskell" style="zoom:50%;" /><ul><li><p>快速排序平均运行时间：504.93 ms</p></li><li><p>归并排序平均运行时间：416.71 ms</p></li></ul><h3 id="2-1-小规模最坏数据"><a href="#2-1-小规模最坏数据" class="headerlink" title="2-1 小规模最坏数据"></a>2-1 小规模最坏数据</h3><blockquote><p>对逆序数组[1000,999,998,997,996,995,…,4,3,2,1]进行升序排列</p></blockquote><h4 id="C-1"><a href="#C-1" class="headerlink" title="C"></a>C</h4><img src="Screenshot2020-02-2617.03.17.png" alt="C" style="zoom:50%;" /><ul><li><p>快速排序平均运行时间：1 ms</p></li><li><p>归并排序平均运行时间：0 ms</p></li></ul><h4 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h4><img src="Screenshot2020-02-2617.04.00.png" alt="Java" style="zoom:50%;" /><ul><li><p>快速排序平均运行时间：3.5 ms</p></li><li><p>归并排序平均运行时间：0.83 ms</p></li></ul><h4 id="python-2"><a href="#python-2" class="headerlink" title="python"></a>python</h4><img src="Screenshot2020-02-2617.05.24.png" alt="python" style="zoom:50%;" /><ul><li>快速排序平均运行时间：26.24 ms</li><li>归并排序平均运行时间：3.51 ms</li></ul><h4 id="Haskell-2"><a href="#Haskell-2" class="headerlink" title="Haskell"></a>Haskell</h4><blockquote><p>因为笔者失误，msort和qsort对应时间输出交换，即第一行为qsort运行时间，第二行为msort运行时间</p></blockquote><img src="Screenshot2020-02-2617.08.14.png" alt="Haskell" style="zoom:50%;" /><ul><li>快速排序平均运行时间：309.12 ms</li><li>归并排序平均运行时间：3.285 ms</li></ul><h3 id="2-2大规模最坏数据"><a href="#2-2大规模最坏数据" class="headerlink" title="2-2大规模最坏数据"></a>2-2大规模最坏数据</h3><blockquote><p>对逆序排列[10000,9999,9998,9997,9996,9995,…,4,3,2,1]进行升序排列</p><p>因为Haskell较易生成正序列表，所以对于Haskell对正序排列[1,2,3,4…9999,10000]进行降序排列</p></blockquote><h4 id="C-2"><a href="#C-2" class="headerlink" title="C"></a>C</h4><img src="Screenshot2020-02-2617.10.10.png" alt="C" style="zoom:50%;" /><ul><li>快速排序平均运行时间：97.17 ms</li><li>归并排序平均运行时间：1.6 ms</li></ul><h4 id="Java-2"><a href="#Java-2" class="headerlink" title="Java"></a>Java</h4><img src="Screenshot2020-02-2616.32.16.png" alt="JAVA" style="zoom:50%;" /><ul><li>快速排序平均运行时间：45.67 ms</li><li>归并排序平均运行时间：4.67 ms</li></ul><h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><img src="Screenshot2020-02-2617.13.01.png" alt="Python" style="zoom:50%;" /><ul><li>快速排序平均运行时间：2595.45 ms -&gt; 2.6s</li><li>归并排序平均运行时间：41.71 ms</li></ul><h4 id="Haskell-3"><a href="#Haskell-3" class="headerlink" title="Haskell"></a>Haskell</h4><blockquote><p>因为笔者失误，msort和qsort对应时间输出交换，即第一行实为qsort运行时间，第二行为msort运行时间</p></blockquote><img src="Screenshot2020-02-2617.50.13.png" alt="Haskell" style="zoom:50%;" /><ul><li>快速排序平均运行时间：31378.91 ms -&gt; 31.4s</li><li>归并排序平均运行时间：38.00 ms</li></ul><h2 id="4-语言易用性和程序规模对比分析"><a href="#4-语言易用性和程序规模对比分析" class="headerlink" title="4 语言易用性和程序规模对比分析"></a>4 语言易用性和程序规模对比分析</h2><h3 id="1-语言易用性"><a href="#1-语言易用性" class="headerlink" title="1 语言易用性"></a>1 语言易用性</h3><h4 id="1-学习难度"><a href="#1-学习难度" class="headerlink" title="1 学习难度"></a>1 学习难度</h4><p><strong>Python&lt;=Java&lt;=C&lt;&lt;Haskell</strong></p><table><thead><tr><th>语言</th><th>难度分析</th></tr></thead><tbody><tr><td>C</td><td>C作为大多数人编程的入门语言，先声夺人，字符串处理文件处理数组初始化等等基础操作，大多时候我都更习惯c的写法。链表与指针和内存管理是C的一大难以逾越的障碍</td></tr><tr><td>Java</td><td>Java的语法大致类似C/C++，并且没有C中令人头疼的链表指针和内存操作，有自动内存管理，个人认为学过C再加上对面向对象的理解是非常容易上手Java的</td></tr><tr><td>Python</td><td>Python近年被广泛推崇为儿童编程的入门语言，不一定说明它很简单，但至少说明它入门容易。Python中缩进作为格式化使得程序总体更简洁，但也使得在大项目中它的可维护性降低。Python更适合于小型项目，或者玩具，例如跑一个CNN。</td></tr><tr><td>Haskell</td><td>习惯了命令式语言，面对Haskell这样的纯函数式语言会陷入完全的不知所措。它是一种不同的概念、一种新的语言范式。需要用与我们的习惯所不同的方式开发应用，不同的方式组织应用，不同的方式扩展应用</td></tr></tbody></table><h4 id="2-语言的编程效率"><a href="#2-语言的编程效率" class="headerlink" title="2 语言的编程效率"></a>2 语言的编程效率</h4><p>个人认为编程分为两部分：初始编码+Debug</p><p>对于几种主流语言编程效率的普遍看法认为，python是效率最高的，C次之，Java最为啰嗦繁琐，而函数式编程语言较少用于工程。但我个人的经历里，不同语言在不同项目规模下各有所长。大型项目大多基于Java的相关框架，如果开发一个移动互联应用(上万行)，Java几乎可以说是没有敌手，它的啰嗦和繁琐减小了奇奇怪怪的bug发生的可能性，而在Java下继续前进还有Korlin，Swift等专门为应用开发而设计的语言。C/C++适合于开发小型项目(几千行)，比如小游戏或者解释器，使用C开发能够在某种程度上方便开发者最大程度提升程序的运行效率。至于Python，个人认为Python适合千行以内的代码规模，目前的学习中使用到Python的地方主要是人工智能和知识工程等课程，一个神经网络大致也就一百行代码，Python的相关库Numpy和TensorFlow在神经网络的应用中已经非常成熟。尽管Python在初始编码阶段能优雅简洁的一行代码完成一个复杂的功能，但在debug阶段Python也能让人一个头有两个大。使用Python中稍不注意就会有缩进造成的bug，怎么检查都难以寻觅其踪迹，可想如果代码规模稍大，该有多么头疼。</p><p>至于函数式编程，其思想和命令式编程有很大的不同。有人说，大部分人第一次使用Haskell或Ocaml时都完全的不知所措。在Haskell里，连分号都跟别人不一样。这并不是语法的问题；Haskell和ML语言完全基于一种不同的概念、一种新的语言范式。需要用不同的方式开发应用，不同的方式组织应用，不同的方式扩展应用。所以说它入门门槛高，适用范围不广，但是学界非常喜欢，其在数学逻辑证明上的优势是其他语言望尘莫及的。而非纯函数编程语言，如Lisp，其历史悠久，也曾在相关历史时期居于某些领域(人工智能)的统治地位。</p><p>总而言之，在不同的战场上使用相适合的工具是决定编程效率的关键。而就本次实验中的编程效率来说，仅仅实现一个快排算法，C，Java和Python并无太大差别，有差别也主要是个人对于不同语言熟练性造成的，Haskell的描述函数是什么而不是命令机器怎么做的优势高下立现，程序规模是其他的一半(统计见表4-3)</p><h3 id="3-程序规模"><a href="#3-程序规模" class="headerlink" title="3 程序规模"></a>3 程序规模</h3><p>Python&gt;=C&gt;Java&gt;&gt;Haskell</p><table><thead><tr><th>语言</th><th align="right">快排总代码行数</th><th>实现快排函数行数</th><th align="right">归并排序总代码行数</th><th align="right">实现归并函数行数</th></tr></thead><tbody><tr><td>C</td><td align="right">46</td><td>24</td><td align="right">41</td><td align="right">41</td></tr><tr><td>Java</td><td align="right">37</td><td>25</td><td align="right">38</td><td align="right">38</td></tr><tr><td>Python</td><td align="right">46</td><td>21</td><td align="right">45</td><td align="right">45</td></tr><tr><td>Haskell</td><td align="right">17</td><td>4</td><td align="right">11</td><td align="right">11</td></tr></tbody></table><img src="Screenshot2020-02-2618.35.39.png" alt="表4-3代码规模比较" style="zoom:100%;" /><h2 id="5-程序运行性能对比分析"><a href="#5-程序运行性能对比分析" class="headerlink" title="5 程序运行性能对比分析"></a>5 程序运行性能对比分析</h2><blockquote><p>(统一保留到小数点后一位)</p></blockquote><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><table><thead><tr><th>语言</th><th align="right">常规组平均运行时间$O(nlogn)$</th><th align="right">小规模最坏组平均运行时间$(O(n^2))$</th><th align="right">大规模最坏组平均运行时间$(O(n^2))$</th></tr></thead><tbody><tr><td>C</td><td align="right">6.0 ms</td><td align="right">1.0 ms</td><td align="right">96.0 ms</td></tr><tr><td>Java</td><td align="right">14.0 ms</td><td align="right">2.4 ms</td><td align="right">41.8 ms</td></tr><tr><td>Python</td><td align="right">88.3 ms</td><td align="right">24.5 ms</td><td align="right">2396.9 ms</td></tr><tr><td>Haskell</td><td align="right">504.9 ms</td><td align="right">284.4 ms</td><td align="right">45812.2 ms</td></tr></tbody></table><img src="Screenshot2020-02-2618.51.15.png" alt="qsort" style="zoom:67%;" /><ul><li>在常规组和小规模最坏组的实验中，符合常规的认知，效率上C最优，Java次之；对于解释型语言，Python较快，Haskell非常耗时，尤其是在n为较大值的时间复杂度(O(n^2))下</li><li>在大规模最坏组的实验中，Java比C快了一半。猜测Java在递归过程中编译器进行了优化，因为本实验未涉及几种语言的内存使用测量，故作出此猜测。</li></ul><h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><table><thead><tr><th>语言</th><th align="right">常规组平均运行时间$O(nlogn)$</th><th align="right">小规模组平均运行时间$O(nlogn)$</th><th align="right">大规模组平均运行时间$O(nlogn)$</th></tr></thead><tbody><tr><td>C</td><td align="right">13.33 ms</td><td align="right">0.3 ms</td><td align="right">1.6 ms</td></tr><tr><td>Java</td><td align="right">16.3 ms</td><td align="right">0.8 ms</td><td align="right">4.7 ms</td></tr><tr><td>Python</td><td align="right">244.5 ms</td><td align="right">3.5 ms</td><td align="right">41.7 ms</td></tr><tr><td>Haskell</td><td align="right">416.7 ms</td><td align="right">3.2 ms</td><td align="right">38.0 ms</td></tr></tbody></table><img src="Screenshot2020-02-2619.32.44.png" alt="Screenshot2020-02-2619.32.44" style="zoom: 67%;" /><ul><li><p>归并排序是一种稳定排序，对于最好/最坏/平均都有 $ O(nlogn) $ 复杂度，在实验中确实可以得到体现；效率上以上是C最优，Java次之；对于解释性语言，常规组(规模50000)</p></li><li><p>在小规模组(规模1000)和大规模组(规模10000)的实验中，可以看到Haskell比Python有了细微的优势。但在常规组(规模50000)的实验中，python又超过了Haskell。笔者另外增加了规模80000和100000的测试：</p><img src="Screenshot2020-02-2620.20.28.png" alt="80000-py" style="zoom:50%;" /><img src="Screenshot2020-02-2620.19.45.png" alt="80000-hs" style="zoom:50%;" /><ul><li>80000规模python归并排序5次平均运行时间：374.1 ms；</li><li>80000规模haskell归并排序5次平均运行时间：477.3 ms;</li><li>100000规模python归并排序5次平均运行时间：474.1 ms;</li><li>100000规模haskell归并排序5次平均运行时间：588.2 ms;</li></ul><p>可以看出随着数据规模增大，python又较haskell具有了优势。</p></li></ul><h2 id="6-实验心得体会"><a href="#6-实验心得体会" class="headerlink" title="6 实验心得体会"></a>6 实验心得体会</h2><ul><li>我想，大多数人的对编程语言的学习都有一个刚入门时遇到一些困难，然后逐渐轻松，云开日朗，但是之后又遇到一个巨大的瓶颈，有可能是诸如指针这样的概念，也有可能是无关语法的对算法的理解限制住了编程能力的提高。差不多所有学过编程的人都有过遇到困难的经历。我们在学了一些基本知识后，必然会遇到一些公认的概念上的关口，比如指针。很少人能轻松的掌握它们。大多数人，比如我，则需要不断的练习和参考例子来理解什么是指针、为什么它们很重要。</li><li>对于同一种思维方式的语言，如命令式语言，一旦学会几种语言后，所有的语言都开始看起来都很相似，虽然有细微差别，但入门都会相对容易。做移动互联的大作业的时候，Dart、Swift或者Kotlin的语法，它们都存在共通的地方；开发个人博客的时候，利用掌握的html我们也能把Jade、ejs的代码改得更符合我们的需求。Python的人学习Ruby可能不会遇到太多的问题，知道Java的人学习C#会感到很熟悉。不错，也有意外的地方。Ruby爱好者在学习Python时会对它的comprehension感到吃惊，Java用户会对C#里的委托摸不着头脑。还是那句话，如果只瞟一眼，它们都很相似。</li><li>但是第一次使用Haskells时我陷入了不知所措。看官方代码的一头雾水和无论如何都无法让自己的程序正确运行的焦灼不安。这并不是语法的问题；Haskell和ML语言完全基于一种不同的概念、一种新的语言范式。需要用不同的方式开发应用，不同的方式组织应用，不同的方式扩展应用。而我还是习惯性的在haskell中输入<code>let list = quicksort [1..10]</code>这样的命令，期望它运行。很多这样的新概念都具有不可思议的强大力量。Haskell里的Monads是跟指针一样基础且强大的概念。所以，跟学了Java后再学C#不一样，有志向学习函数式语言的人需要往回走的更远，去学习更加基础的概念后才能接下去学习。就像是完全再学习一次</li><li>说说细节上的收获，在进行大规模的实验时，我发现python和Java都有递归深度限制，但是C几乎是完全自由没有任何限制的。在运行速度上，解释执行的Python和Haskell自然无法与编译执行的C和Java比</li></ul>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> report </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Compilation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客搭建入门</title>
      <link href="/posts/2727/"/>
      <url>/posts/2727/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p>使用基于Nodejs的Hexo博客框架, 结合github.io页面, 快速搭建个人博客</p></blockquote><a id="more"></a><h2 id="1-工具准备"><a href="#1-工具准备" class="headerlink" title="1 工具准备"></a>1 工具准备</h2><h3 id="1-GITHUB仓库创建"><a href="#1-GITHUB仓库创建" class="headerlink" title="1 GITHUB仓库创建"></a>1 GITHUB仓库创建</h3><p>​    创建新repository，名为<code>username.github.io</code>(username与github用户名一致)</p><h3 id="2-安装相关工具"><a href="#2-安装相关工具" class="headerlink" title="2 安装相关工具"></a>2 安装相关工具</h3><ol><li><p><a href="https://www.cnblogs.com/kaiye/p/4937191.html" rel="external nofollow noreferrer">安装node管理工具nvm</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用brew安装</span></span><br><span class="line">brew install nvm</span><br><span class="line"><span class="comment"># 添加进终端配置文件（.zshrc或.bash_profile)</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=~/.nvm</span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span></span><br></pre></td></tr></table></figure><blockquote><p>此处有个坑: nvm官方并不建议使用brew安装</p><p><code>Homebrew installation is not supported. If you have issues with homebrew-installed nvm, please brew uninstall it, and install it using the instructions below, before filing an issue.</code></p><p>如果使用Homebrew安装，因为安装路径等原因, 在.nvm中会缺少nvm-exec和nvm.sh两个文件。导致每次启动终端都需要输入<code>source $(brew --prefix nvm)/nvm.sh</code>才能使当前终端使用nvm命令</p><p>解决方法有2</p><ol><li><p>简单粗暴：在.zshrc（终端配置文件）中加入<code>source $(brew --prefix nvm)/nvm.sh</code></p></li><li><p>曲线救国：(注意此方法curl命令可能被墙, 具体见<a href="https://github.com/nvm-sh/nvm" rel="external nofollow noreferrer">nvm项目github</a>)</p><ol><li><p>卸载使用brew安装的nvm<code>brew uninstall nvm</code></p></li><li><p>使用curl命令下载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.35.2/install.sh | bash</span><br></pre></td></tr></table></figure></li><li><p>终端配置文件加入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/bash_completion"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/bash_completion"</span>  <span class="comment"># This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure></li></ol></li></ol></blockquote></li><li><p>安装nodejs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install stable</span><br></pre></td></tr></table></figure><blockquote><p> 网上很多过期教程会建议使用 <code>nvm install 4</code> , <code>nvm install 6</code>  , 实际安装后, node版本在7以下的都会抛出异常, 建议一步到位安装最新稳定版node</p><p> nvm/npm常用命令:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换nvm版本至 &lt;number&gt;开头的默认版本</span></span><br><span class="line">nvm use &lt;number&gt; </span><br><span class="line"><span class="comment">#设置默认 node 版本为 0.12.7</span></span><br><span class="line">nvm <span class="built_in">alias</span> default 0.12.7 </span><br><span class="line"><span class="comment"># 使用.nvmrc文件配置项目所使用的node版本</span></span><br><span class="line"><span class="built_in">cd</span> &lt;项目根目录&gt;  <span class="comment">#进入项目根目录</span></span><br><span class="line"><span class="built_in">echo</span> &lt;number&gt; &gt; .nvmrc <span class="comment">#添加 .nvmrc 文件</span></span><br><span class="line">nvm use <span class="comment">#无需指定版本号，会自动使用 .nvmrc 文件中配置的版本</span></span><br><span class="line">node -v <span class="comment">#查看 node 是否切换为对应版本</span></span><br><span class="line"><span class="comment">#安装 &lt;module-name&gt; 模块至全局目录，安装完成的路径是 /Users/&lt;username&gt;/.nvm/versions/node/&lt;nvm-version&gt;/lib/&lt;module-name&gt;</span></span><br><span class="line">npm install -g &lt;module-name&gt;</span><br></pre></td></tr></table></figure><p> nvm与n的区别</p><ul><li>node 版本管理工具还有一个是 <a href="https://github.com/tj/n" rel="external nofollow noreferrer">TJ 大神的 n</a> 命令，n 命令是作为一个 node 的模块而存在，而 nvm 是一个独立于 node/npm 的外部 shell 脚本，因此 n 命令相比 nvm 更加局限。</li><li>由于 npm 安装的模块路径均为 /usr/local/lib/node_modules ，当使用 n 切换不同的 node 版本时，实际上会共用全局的 node/npm 目录。 因此不能很好的满足『按不同 node 版本使用不同全局 node 模块』的需求。</li></ul></blockquote></li><li><p><a href="https://hexo.io/zh-cn/" rel="external nofollow noreferrer">安装Hexo</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install hexo-cli -g</span><br></pre></td></tr></table></figure></li></ol><h2 id="2-hexo的使用入门"><a href="#2-hexo的使用入门" class="headerlink" title="2 hexo的使用入门"></a>2 <a href="https://hexo.io/zh-cn/" rel="external nofollow noreferrer">hexo的使用入门</a></h2><ol><li><p>创建博客和基础配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init username.github.io <span class="comment"># 博客根目录&lt;folder_name&gt;</span></span><br><span class="line"><span class="built_in">cd</span> username.github.io</span><br></pre></td></tr></table></figure></li></ol><p>更改博客根目录下的_config.yml文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span></span><br><span class="line"><span class="attr">author:</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-Hans</span> <span class="comment">#中文</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">git</span> </span><br><span class="line"><span class="attr">repo:</span> <span class="string">https://github.com/username/username.github.io.git</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p>更换主题</p><blockquote><p>主题测评见另一篇文章<a href="../hexo_theme">hexo的主题比较</a> </p><p>hexo初始化中自带landscape主题</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此处以next主题为例</span></span><br><span class="line">   git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>进入themes/next, 打开_config.yml, 按照文件中的说明即可对主题进行基础配置</p><p>同时更改博客根目录中_config.yml文件的<code>theme: next</code></p></li><li><p>写文章</p><p>博客根目录username.github.io下的source文件夹保存所有博客, 默认使用md语法</p><blockquote><p><a href="https://hexo.io/zh-cn/docs/writing.html" rel="external nofollow noreferrer">hexo写作命令</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hexo博客搭建入门</span><br><span class="line">date: 2020-02-16</span><br><span class="line">tags: hexo js</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">  - </span>Code</span><br><span class="line"><span class="bullet">  - </span>Guide</span><br><span class="line">keywords: hexo js 前端 博客</span><br><span class="line">---</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure></li><li><p>测试<code>hexo s</code></p></li><li><p>安装使用hexo-deployer-git](<a href="https://link.jianshu.com/?t=https://github.com/hexojs/hexo-deployer-git)自动部署发布工具" rel="external nofollow noreferrer">https://link.jianshu.com/?t=https://github.com/hexojs/hexo-deployer-git)自动部署发布工具</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure></li></ol><h2 id="hexo的使用进阶"><a href="#hexo的使用进阶" class="headerlink" title="hexo的使用进阶"></a>hexo的使用进阶</h2><h3 id="图片"><a href="#图片" class="headerlink" title=" 图片 "></a><a href="https://hexo.io/zh-cn/docs/asset-folders.html" rel="external nofollow noreferrer"> 图片 </a></h3><ol><li><p>资源文件夹 : 最简单的方法就是将它们放在 <code>source/images</code> 文件夹中。然后通过类似于 <code>![](/images/image.jpg)</code> 的方法访问它们。</p></li><li><p>组织化资源管理方式 : 通过将 <code>config.yml</code> 文件中的 <code>post_asset_folder</code> 选项设为 <code>true</code> 来打开, 当资源文件管理功能打开后，Hexo将会在你每一次通过 <code>hexo new [layout]</code> 命令创建新文章时自动创建一个文件夹。这个资源文件夹将会有与这个文章文件一样的名字。将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径来引用它们</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片名称</span>](<span class="link">图片名称.jpg</span>)</span><br></pre></td></tr></table></figure><p>需要注意, 使用md时,在首页显示会出现错误, 使用标签插件可以解决</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img 图片名称.jpg This is an example image %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>tips</p><ol><li><p>在typora的设置中进行以下修改可以与hexo同步：</p><p><img src="typoraimg_setting.jpg" alt="typoraimg_setting"></p></li><li><p>组织化资源管理的两种方式都会使图片失去本地编辑器上的可读性</p></li></ol><div class="tip">3. 实际使用中会遇到部分主题对标签插件渲染出现莫名其妙的错误(vexo)，或者主题不支持(terminal)，所以除非需要在首页的展示缩略图，建议使用markdown语法的方式。</div></blockquote></li></ol><h3 id="block"><a href="#block" class="headerlink" title="block"></a>block</h3><p>&lt;–To Be Continued–&gt;</p><h1 id="Hexo-Built-in-Tag-Helpers"><a href="#Hexo-Built-in-Tag-Helpers" class="headerlink" title="Hexo Built-in Tag Helpers"></a><a href="https://blog.zhangruipeng.me/hexo-theme-icarus/Configuration/Posts/hexo-built-in-tag-helpers/" rel="external nofollow noreferrer">Hexo Built-in Tag Helpers</a></h1>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Guide </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo的主题比较</title>
      <link href="/posts/27751/"/>
      <url>/posts/27751/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p>hexo各个主题的比较, 以及部分主题的修改</p></blockquote><a id="more"></a><h2 id="1-我的需求"><a href="#1-我的需求" class="headerlink" title="1 我的需求"></a>1 我的需求</h2><blockquote><p>目的：记录开发中遇到的坑，形成自己的handbook</p></blockquote><ol><li>功能：<ul><li>🔍站内搜索LeanCloud统计</li><li>🤥<a href="#valine_comment"> Valine的评论服务 </a></li><li>较为友好的代码高亮</li><li>有展示GitHub project（接入GitHub的API）的project页面</li><li>seo支持</li></ul></li><li>界面：<ul><li>首页tagCloud和categories的Widget</li><li>首页的index展示文章的tag和category标签</li><li>单篇博文内有随页面变化的目录widget</li><li>archive展示时间轴 </li></ul></li></ol><h2 id="2-各个theme评价"><a href="#2-各个theme评价" class="headerlink" title="2 各个theme评价"></a>2 各个theme评价</h2><h3 id="1-基于jade-pug-开发的主题"><a href="#1-基于jade-pug-开发的主题" class="headerlink" title="1 基于jade ( pug )开发的主题"></a>1 基于jade ( pug )开发的主题</h3><blockquote><p>Jade 是一个高性能的模板引擎，它深受 <a href="http://haml-lang.com/" rel="external nofollow noreferrer">Haml</a> 影响，它是用 JavaScript 实现的，并且可以供 <a href="http://nodejs.org/" rel="external nofollow noreferrer">Node</a> 使用，后来由于商标的原因，改为Pug  </p><div class="tip"> 以下列举的主题都仍然使用hexo-renderer-jade插件，npm会提示插件已被废弃，运行时会显示错误提示。首先要替换hexo-renderer-jade插件为hexo-renderer-pug，下载命令为npm install hexo-renderer-pug --save；然后将主题layout文件夹中的所有.jade文件替换为.pug文件</div>入门指南：[pug中文文档](https://pugjs.org/zh-cn/api/getting-started.html)</blockquote><ol><li><p><a href="https://github.com/pinggod/hexo-theme-apollo" rel="external nofollow noreferrer">Apollo</a></p><p>博客首页<br><img src="apollo_homepage.png" alt="apollo_homepage"><br>博客归档页<br><img src="apollo_archivepage.png" alt="apollo_archivepage"></p><ul><li>界面干净，多个theme都基于apollo开发，如<a href="https://github.com/MikeCoder/hexo-theme-Gandalfr" rel="external nofollow noreferrer">Gandalfr</a>  <a href="https://github.com/claymcleod/hexo-theme-hermes" rel="external nofollow noreferrer">Hermes</a>  <a href="https://github.com/Dreyer/hexo-theme-artemis" rel="external nofollow noreferrer">artemis</a> <a href="https://github.com/bulandent/hexo-theme-bubuzou" rel="external nofollow noreferrer">bubuzou</a> <a href="https://github.com/lyndonoc/hexo-theme-pandollo" rel="external nofollow noreferrer">pandollo</a></li><li>缺点: 功能缺乏，需要自己接入评论、目录、搜索、Widget等功能；</li></ul></li><li><p><a href="https://github.com/bulandent/hexo-theme-bubuzou" rel="external nofollow noreferrer">bubuzou</a></p><p>博客首页<br><img src="bubuzou_archieve_page.png" alt="bubuzou_archieve_page"><br>博文底部<br><img src="bubuzou_post_page.png" alt="bubuzou_post_page"></p><ul><li><p>基于apollo开发, 补充大量apollo缺乏的功能，如评论、目录、搜索、Widget；评论支持Valine评论；</p></li><li><p>首页 css页面适配存在缺陷（缩放时borden过小），代码高亮有缺陷，个别博文底部不会出现评论窗口(奇奇怪怪的bug)</p></li><li><p>实际使用的时候发现leancloud的访问量统计功能有缺点，留个坑；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p.visit</span><br><span class="line">i(class&#x3D;&quot;article-timer&quot;, data-identity&#x3D;item.path)</span><br><span class="line">   span 次访问</span><br><span class="line">   if (is_home())</span><br><span class="line">   i(data-hk-page&#x3D;&#39;http:&#x2F;&#x2F;anne416wu.github.io&#39;+url_for(item.path)) -</span><br><span class="line">   else </span><br><span class="line">   i(data-hk-page&#x3D;&quot;current&quot;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="https://github.com/MikeCoder/hexo-theme-Gandalfr" rel="external nofollow noreferrer">Gandalfr</a></p><ul><li>不放图了，这玩意儿bug挺多。有意思的是作者写了个tagCloud的辅助插件，给TagCloud加上了动画效果。界面上较bubuzou更贴近apollo。</li><li>有时间的可以把Gandalfr的界面和bubuzou的功能结合一下。</li></ul></li></ol><h3 id="2-基于ejs开发的主题"><a href="#2-基于ejs开发的主题" class="headerlink" title="2 基于ejs开发的主题"></a>2 基于ejs开发的主题</h3><blockquote><p> ejs是一套简单的模板语言，利用普通的 JavaScript 代码生成 HTML 页面，相比上面使用jade，修改更为方便。个人体验感觉ejs性能的确不如jade。</p></blockquote><ol><li><p><a href="https://github.com/yanm1ng/hexo-theme-vexo" rel="external nofollow noreferrer">Vexo</a><br>博客首页<br><img src="vexo_homepage.png" alt="vexo_homepage"><br>博文开头<br><img src="vexo_postpage.png" alt="vexo_postpage"><br>归档页<br><img src="vexo_archievepage.png" alt="vexo_archivepage"><br>项目页<br><img src="vexo_projectpage.png" alt="vexo_projectpage"></p><ul><li>满足对界面的一切幻想(对界面的幻想都是这个主题惯出来的)，支持多种代码高亮</li><li>缺点：未接入搜索功能，仅支持gitment评论，无首页CLoudTag的Widget等</li><li>本地运行存在bug。使用<code>hexo s</code>预览时，如果文章资源读取出现错误，整个博客页面会显示空白</li></ul></li><li><p><a href="https://github.com/probberechts/hexo-theme-cactus" rel="external nofollow noreferrer">Cactus</a></p><p>博客首页<br><img src="cactus_homepage.png" alt="cactus_homepage"><br>博文开头<br><img src="cactus_postpage.png" alt="cactus_postpage"><br>归档页<br><img src="cactus_archievepage.png" alt="cactus_archivepage"></p><ul><li>界面干净，支持多种代码高亮</li><li>因为是国外开发的，对本地化的支持较少；</li></ul><p>&lt;–未完待续–&gt;</p></li></ol><h3 id="3-基于Swig开发的主题"><a href="#3-基于Swig开发的主题" class="headerlink" title="3 基于Swig开发的主题"></a>3 基于Swig开发的主题</h3>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VPS 配置</title>
      <link href="/posts/9931/"/>
      <url>/posts/9931/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p> VPS服务器的创建、Shadowsocks的配置</p></blockquote><a id="more"></a><blockquote><p>参考网址</p><ul><li>基本ssh安装配置：<a href="https://jerryzou.com/posts/shadowsocks-and-digitalocean/" rel="external nofollow noreferrer">https://jerryzou.com/posts/shadowsocks-and-digitalocean/</a></li><li>进阶使用：<a href="https://www.itrhx.com/2020/01/10/A61-build-a-SSR-server-with-VPS/" rel="external nofollow noreferrer">https://www.itrhx.com/2020/01/10/A61-build-a-SSR-server-with-VPS/</a></li></ul></blockquote><h2 id="1-注册和创建Droplets"><a href="#1-注册和创建Droplets" class="headerlink" title="1 注册和创建Droplets"></a>1 注册和创建Droplets</h2><blockquote><p>VPS-Digital Ocean - CentOS 7 x64 - Enable IPV6</p><p>非CentOS7可能导致后续出现python等缺失</p></blockquote><ol><li><p>创建SSH key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看本地的SSH key</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">ls *.pub</span><br><span class="line"><span class="comment">#创建新的SSH key</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">"email@example.com"</span></span><br></pre></td></tr></table></figure></li><li><p>将公钥添加到账号</p></li><li><p>远程登录服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@IP地址</span><br></pre></td></tr></table></figure><p>退出服务器     <code>exit</code></p><blockquote><p>附加：vim的安装和配置</p><ol><li><p>安装vim</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vim</span><br></pre></td></tr></table></figure></li><li><p>配置vim</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.vimrc</span><br></pre></td></tr></table></figure></li><li><p>vim配置文件参考</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">" Configuration file for vim</span></span><br><span class="line"><span class="string">set modelines=0"</span> CVE-2007-2438</span><br><span class="line"></span><br><span class="line"><span class="string">" Normally we use vim-extensions. If you want true vi-compatibility</span></span><br><span class="line"><span class="string">"</span> remove change the following statements</span><br><span class="line"><span class="built_in">set</span> nocompatible<span class="string">" Use Vim defaults instead of 100% vi compatibility</span></span><br><span class="line"><span class="string">set backspace=2"</span> more powerful backspacing</span><br><span class="line"></span><br><span class="line"><span class="string">" Don't write backup file if vim is being called by "</span>crontab -e<span class="string">"</span></span><br><span class="line"><span class="string">au BufWrite /private/tmp/crontab.* set nowritebackup nobackup</span></span><br><span class="line"><span class="string">"</span> Don<span class="string">'t write backup file if vim is being called by "chpass"</span></span><br><span class="line"><span class="string">au BufWrite /private/etc/pw.* set nowritebackup nobackup</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let skip_defaults_vim=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">syntax on</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">autocmd InsertLeave * se nocul</span></span><br><span class="line"><span class="string">autocmd InsertEnter * se cul</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set tabstop=4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set softtabstop=4</span></span><br><span class="line"><span class="string">set shiftwidth=4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set number</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">colorscheme pablo</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set ruler</span></span><br><span class="line"><span class="string">set scrolloff=3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set rtp+=/usr/local/opt/fzf</span></span><br></pre></td></tr></table></figure></li></ol></blockquote></li></ol><h2 id="2-Shadowsocks"><a href="#2-Shadowsocks" class="headerlink" title="2 Shadowsocks"></a>2 Shadowsocks</h2><ol><li><p>安装<br>CentOS7自带python2.7，所以直接安装pip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure></li><li><p>创建配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/shadowsocks.json</span><br></pre></td></tr></table></figure></li><li><p>配置文件内容：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通配置</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"服务器ip地址"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"你设置的密码"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 多端口配置</span></span><br><span class="line"><span class="comment">// 即把server_port和password两项替换为port_password</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>: <span class="string">"服务器ip地址"</span>,</span><br><span class="line">    <span class="attr">"server_ipv6"</span>: <span class="string">"::"</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>: <span class="number">1081</span>,</span><br><span class="line">    <span class="attr">"port_password"</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"8686"</span>:<span class="string">"你设置的密码"</span>,</span><br><span class="line">        <span class="attr">"8687"</span>:<span class="string">"你设置的密码"</span>,</span><br><span class="line">        <span class="attr">"8688"</span>:<span class="string">"你设置的密码"</span>,</span><br><span class="line">        <span class="attr">"8689"</span>:<span class="string">"你设置的密码"</span>,</span><br><span class="line">        <span class="attr">"8690"</span>:<span class="string">"你设置的密码"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">120</span>,</span><br><span class="line">    <span class="attr">"udp_timeout"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"method"</span>: <span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"auth_sha1_v4_compatible"</span>,</span><br><span class="line">    <span class="attr">"protocol_param"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"obfs"</span>: <span class="string">"http_simple_compatible"</span>,</span><br><span class="line">    <span class="attr">"obfs_param"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"dns_ipv6"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"connect_verbose_info"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"redirect"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workers"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ssh服务器启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c /etc/shadowsocks.json</span><br><span class="line"><span class="comment"># 或者在后台运行</span></span><br><span class="line">ssserver -c /etc/shadowsocks.json -d start</span><br><span class="line">ssserver -c /etc/shadowsocks.json -d stop</span><br><span class="line"><span class="comment"># 日志</span></span><br><span class="line">ssserver -c /etc/shadowsocks.json --<span class="built_in">log</span>-file /tmp/ss.log -d start</span><br><span class="line">tail -f /tmp/ss.log</span><br></pre></td></tr></table></figure></li></ol><h2 id="3-速度升级和安全性"><a href="#3-速度升级和安全性" class="headerlink" title="3 速度升级和安全性"></a>3 速度升级和安全性</h2><ul><li><p>下载锐速服务（建议直接使用下一条四合一脚本）</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  对于centOS7 需要先下载需要的固件20140911</span></span><br><span class="line">  rpm -ivh ftp://ftp.pbone.net/mirror/ftp.scientificlinux.org/linux/scientific/7.0/x86_64/updates/security/linux-firmware-20140911-0.1.git365e80c.el7.noarch.rpm</span><br><span class="line"><span class="comment"># 更换内核</span></span><br><span class="line">wget --no-check-certificate -O rskernel.sh https://raw.githubusercontent.com/hombo125/doubi/master/rskernel.sh &amp;&amp; bash rskernel.sh</span><br><span class="line"><span class="comment"># 内核更换完后显示Success后需要重新连接到服务器</span></span><br><span class="line">ssh root@IP地址</span><br><span class="line"><span class="comment"># 查看当前内核版本</span></span><br><span class="line">uname -r</span><br><span class="line"><span class="comment"># 下载锐速，一路回车安装</span></span><br><span class="line">yum install net-tools -y &amp;&amp; wget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; bash appex.sh install</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><a href="https://www.hostloc.com/thread-508015-1-1.html" rel="external nofollow noreferrer"><strong>bbr 原版/魔改/plus+锐速 四合一脚本</strong></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载脚本</span></span><br><span class="line">wget <span class="string">"https://github.com/cx9208/Linux-NetSpeed/raw/master/tcp.sh"</span> &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</span><br><span class="line"><span class="comment"># 如果证书错误的话</span></span><br><span class="line">apt-get -y install ca-certificates</span><br><span class="line">yum -y install ca-certificates</span><br><span class="line"><span class="comment"># 1-3中选择切换内核，自动重启，如果出现是否删除Configuring image,选择no</span></span><br><span class="line"><span class="comment"># 调用脚本</span></span><br><span class="line">./tcp.sh</span><br><span class="line"><span class="comment"># 在4-8中选择要开的加速</span></span><br><span class="line">   <span class="string">"1. 安装 BBR/BBR魔改版内核"</span>        对应4,5,6（原版，魔改，暴力魔改）</span><br><span class="line">   <span class="string">"2. 安装 BBRplus版内核 "</span>                对应7（plus）</span><br><span class="line">   <span class="string">"3. 安装 Lotserver(锐速)内核"</span>        对应8（锐速）</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><a href="https://www.oldking.net/tag/speedtest/" rel="external nofollow noreferrer">服务器测速 speedtest</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 断链接</span></span><br><span class="line">wget -qO- git.io/superbench.sh | bash</span><br><span class="line"><span class="comment"># 使用参数</span></span><br><span class="line">wget -qO- git.io/superbench.sh | bash -s info</span><br><span class="line">wget -qO- git.io/superbench.sh | bash -s io</span><br><span class="line">wget -qO- git.io/superbench.sh | bash -s speed</span><br><span class="line">wget -qO- git.io/superbench.sh | bash -s fast</span><br><span class="line">wget -qO- git.io/superbench.sh | bash -s share</span><br></pre></td></tr></table></figure></li><li><p>配置防火墙（可能到处后续安装锐速服务后出现模块缺失）</p><ol><li><p>配置防火墙文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/firewalld/zones/public.xml</span><br></pre></td></tr></table></figure><p> 一个端口对应两个</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">zone</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">short</span>&gt;</span>Public<span class="tag">&lt;/<span class="name">short</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">service</span> <span class="attr">name</span>=<span class="string">"dhcpv6-client"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">service</span> <span class="attr">name</span>=<span class="string">"ssh"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"tcp"</span> <span class="attr">port</span>=<span class="string">"8686"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"udp"</span> <span class="attr">port</span>=<span class="string">"8686"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"tcp"</span> <span class="attr">port</span>=<span class="string">"8687"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"udp"</span> <span class="attr">port</span>=<span class="string">"8687"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"tcp"</span> <span class="attr">port</span>=<span class="string">"8688"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"udp"</span> <span class="attr">port</span>=<span class="string">"8688"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"tcp"</span> <span class="attr">port</span>=<span class="string">"8689"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"udp"</span> <span class="attr">port</span>=<span class="string">"8689"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"tcp"</span> <span class="attr">port</span>=<span class="string">"8690"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"udp"</span> <span class="attr">port</span>=<span class="string">"8690"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"tcp"</span> <span class="attr">port</span>=<span class="string">"8691"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">protocol</span>=<span class="string">"udp"</span> <span class="attr">port</span>=<span class="string">"8691"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">zone</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li></ul><ol start="2"><li><p>重启shadowsocks，重启防火墙</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启防火墙</span></span><br><span class="line">systemctl restart firewalld.service</span><br><span class="line"><span class="comment"># 如果没有firewalld-cmd命令</span></span><br><span class="line">yum install firewalld</span><br></pre></td></tr></table></figure><blockquote><p>firewalld的基本使用</p><p>启动： systemctl start firewalld</p><p>关闭： systemctl stop firewalld</p><p>查看状态： systemctl status firewalld</p><p>开机禁用 ： systemctl disable firewalld</p><p>开机启用 ： systemctl enable firewalld</p><p>查看开放的端口：firewall-cmd –list-ports</p><p>添加端口：firewall-cmd –add-port=8080/tcp –permanent （–permanent永久生效，没有此参数重启后失效）<br>————————————————<br>原文链接：<a href="https://blog.csdn.net/qq_27751535/article/details/89633138" rel="external nofollow noreferrer">https://blog.csdn.net/qq_27751535/article/details/89633138</a></p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Guide </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac快捷键和常用命令行</title>
      <link href="/posts/8410/"/>
      <url>/posts/8410/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p>mac常用命令行</p></blockquote><a id="more"></a><h2 id="隐藏文件"><a href="#隐藏文件" class="headerlink" title="隐藏文件"></a>隐藏文件</h2><ul><li>显示隐藏文件：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.Finder AppleShowAllFiles YES</span><br><span class="line">KillAll Finder</span><br></pre></td></tr></table></figure><ul><li>不显示隐藏文件：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.Finder AppleShowAllFiles NO</span><br><span class="line">KillAll Finder</span><br></pre></td></tr></table></figure><ul><li>快捷键方式：<code>command+shift+.</code></li></ul><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><ul><li>修改截图默认文件名</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.screencapture name &quot;Screenshot&quot;</span><br><span class="line">killall SystemUIServer</span><br></pre></td></tr></table></figure><ul><li>更换默认截图路径</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.screencapture location ~&#x2F;Desktop&#x2F;屏幕截图</span><br><span class="line">killall SystemUIServer</span><br></pre></td></tr></table></figure><ul><li>去掉窗口截图的阴影</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.screencapture disable-shadow -bool true</span><br><span class="line">killall SystemUIServer</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> bash </tag>
            
            <tag> hot key </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown进阶使用技巧</title>
      <link href="/posts/64578/"/>
      <url>/posts/64578/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p>markdown中的mermaid作图, html结合等进阶使用的handbook</p></blockquote><hr><a id="more"></a><!--more--><h2 id="link_in_page">页内跳转</h2><p><span id = "jumptoexample"> 两种方法究其根本都是md中html语法的应用</span></p><h3 id="link_in_page.1">1.生成目录方法</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>[<span class="string">页内跳转</span>](<span class="link">#link_in_page</span>)</span><br><span class="line"><span class="bullet">  * </span>[<span class="string">1生成目录的方法</span>](<span class="link">#link_in_page.1</span>)</span><br><span class="line"><span class="bullet">  * </span>[<span class="string">2html标签实现</span>](<span class="link">#link_in_page.2</span>)</span><br></pre></td></tr></table></figure><p>生成效果:</p><ul><li><a href="#link_in_page">页内跳转</a><ul><li><a href="#link_in_page.1">1.生成目录的方法</a></li><li><a href="#link_in_page.2">2.html标签实现</a></li></ul></li></ul><p>在正文中对应的地方, 加入章节标题对应id</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">'link_in_page'</span>&gt;</span></span>业内跳转<span class="xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="link_in_page.2">2.html标签实现</h3><p>定义一个锚在跳转的目的地    <code>&lt;span id = &quot;jumptoexample&quot;&gt;页内跳转&lt;/span&gt;</code> </p><p>在要需要跳转的地方使用md语法的超链接 <code>[ 点击跳转 ](#jumptoexample)</code></p><p><a href="#jumptoexample"> 点击跳转 </a></p>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Anaconda的环境管理</title>
      <link href="/posts/52525/"/>
      <url>/posts/52525/</url>
      
        <content type="html"><![CDATA[<hr><blockquote><p>常用的Conda命令</p></blockquote><a id="more"></a><h1 id="Conda的环境管理"><a href="#Conda的环境管理" class="headerlink" title="Conda的环境管理"></a>Conda的环境管理</h1><p>Conda的环境管理功能允许我们同时安装若干不同版本的Python，并能自由切换。对于上述安装过程，假设我们采用的是Python 2.7对应的安装包，那么Python 2.7就是默认的环境（默认名字是root注意这个root不是超级管理员的意思）。<br>假设我们需要安装Python 3.4，此时，我们需要做的操作如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个名为python34的环境，指定Python版本是3.4（不用管是3.4.x，conda会为我们自动寻找3.4.x中的最新版本）</span><br><span class="line">conda create —name python34 python&#x3D;3.4</span><br><span class="line"></span><br><span class="line"># 安装好后，使用activate激活某个环境</span><br><span class="line">activate python34 # for Windows</span><br><span class="line">source activate python34 # for Linux &amp; Mac</span><br><span class="line"># 激活后，会发现terminal输入的地方多了python34的字样，实际上，此时系统做的事情就是把默认2.7环境从PATH中去除，再把3.4对应的命令加入PATH</span><br><span class="line"></span><br><span class="line"># 此时，再次输入</span><br><span class="line">python —version</span><br><span class="line"># 可以得到&#96;Python 3.4.5 :: Anaconda 4.1.1 (64-bit)&#96;，即系统已经切换到了3.4的环境</span><br><span class="line"></span><br><span class="line"># 如果想返回默认的python 2.7环境，运行</span><br><span class="line">deactivate python34 # for Windows</span><br><span class="line">source deactivate python34 # for Linux </span><br><span class="line">conda deactivate python34 # for mac</span><br><span class="line"></span><br><span class="line"># 删除一个已有的环境</span><br><span class="line">conda remove —name python34 —all</span><br></pre></td></tr></table></figure><blockquote><p>用户安装的不同python环境都会被放在目录~/anaconda/envs<br>下，可以在命令中运行<br>conda info -e<br>查看已安装的环境，当前被激活的环境会显示有一个星号或者括号。<br>说明：有些用户可能经常使用python 3.4环境，因此直接把<br>~/anaconda/envs/python34<br>下面的bin或者Scripts加入PATH，去除anaconda对应的那个bin目录。这个办法，怎么说呢，也是可以的，但总觉得不是那么elegant……<br>如果直接按上面说的这么改PATH，你会发现conda命令又找不到了（当然找不到啦，因为conda在<br>~/anaconda/bin<br>里呢），这时候怎么办呢？方法有二：1. 显式地给出conda的绝对地址 2. 在python34环境中也安装conda工具（推荐）。</p></blockquote><h1 id="Conda的包管理"><a href="#Conda的包管理" class="headerlink" title="Conda的包管理"></a>Conda的包管理</h1><blockquote><p>Conda的包管理就比较好理解了，这部分功能与<br>pip<br>类似。<br>例如，如果需要安装scipy：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"># 安装scipy</span><br><span class="line">conda install scipy</span><br><span class="line"># conda会从从远程搜索scipy的相关信息和依赖项目，对于python 3.4，conda会同时安装numpy和mkl（运算加速的库）</span><br><span class="line"># 查看已经安装的packages</span><br><span class="line">conda list</span><br><span class="line"># 最新版的conda是从site-packages文件夹中搜索已经安装的包，不依赖于pip，因此可以显示出通过各种方式安装的包</span><br><span class="line"># 安装scipy</span><br><span class="line">conda install scipy</span><br><span class="line"># conda会从从远程搜索scipy的相关信息和依赖项目，对于python 3.4，conda会同时安装numpy和mkl（运算加速的库）</span><br><span class="line"># 查看已经安装的packages</span><br><span class="line">conda list</span><br><span class="line"># 最新版的conda是从site-packages文件夹中搜索已经安装的包，不依赖于pip，因此可以显示出通过各种方式安装的包</span><br><span class="line">### conda的一些常用操作如下：</span><br><span class="line"># 查看当前环境下已安装的包</span><br><span class="line">conda list</span><br><span class="line"># 查看某个指定环境的已安装包</span><br><span class="line">conda list -n python34</span><br><span class="line"># 查找package信息</span><br><span class="line">conda search numpy</span><br><span class="line"># 安装package</span><br><span class="line">conda install -n python34 numpy</span><br><span class="line"># 如果不用-n指定环境名称，则被安装在当前活跃环境</span><br><span class="line"># 也可以通过-c指定通过某个channel安装</span><br><span class="line"># 更新package</span><br><span class="line">conda update -n python34 numpy</span><br><span class="line"># 删除package</span><br><span class="line">conda remove -n python34 numpy</span><br><span class="line"># 查看当前环境下已安装的包</span><br><span class="line">conda list</span><br><span class="line"># 查看某个指定环境的已安装包</span><br><span class="line">conda list -n python34</span><br><span class="line"># 查找package信息</span><br><span class="line">conda search numpy</span><br><span class="line"># 安装package</span><br><span class="line">conda install -n python34 numpy</span><br><span class="line"># 如果不用-n指定环境名称，则被安装在当前活跃环境</span><br><span class="line"># 也可以通过-c指定通过某个channel安装</span><br><span class="line"># 更新package</span><br><span class="line">conda update -n python34 numpy</span><br><span class="line"># 删除package</span><br><span class="line">conda remove -n python34 numpy</span><br><span class="line">### 前面已经提到，conda将conda、python等都视为package，因此，完全可以使用conda来管理conda和python的版本，例如</span><br><span class="line"># 更新conda，保持conda最新</span><br><span class="line">conda update conda</span><br><span class="line"># 更新anaconda</span><br><span class="line">conda update anaconda</span><br><span class="line"># 更新python</span><br><span class="line">conda update python</span><br><span class="line"># 假设当前环境是python 3.4, conda会将python升级为3.4.x系列的当前最新版本</span><br><span class="line">### 补充：如果创建新的python环境，比如3.4，运行</span><br><span class="line">### conda create -n python34 python&#x3D;3.4</span><br><span class="line">### 之后，conda仅安装python 3.4相关的必须项，如python, pip等，如果希望该环境像默认环境那样，安装anaconda集合包，只需要：</span><br><span class="line"># 在当前环境下安装anaconda包集合</span><br><span class="line">conda install anaconda</span><br><span class="line"># 结合创建环境的命令，以上操作可以合并为</span><br><span class="line">conda create -n python34 python&#x3D;3.4 anaconda</span><br><span class="line"># 也可以不用全部安装，根据需求安装自己需要的package即可</span><br><span class="line"># 在当前环境下安装anaconda包集合</span><br><span class="line">conda install anaconda</span><br><span class="line"># 结合创建环境的命令，以上操作可以合并为</span><br><span class="line">conda create -n python34 python&#x3D;3.4 anaconda</span><br><span class="line"># 也可以不用全部安装，根据需求安装自己需要的package即可</span><br><span class="line"># 设置国内镜像</span><br><span class="line">### 如果需要安装很多packages，你会发现conda下载的速度经常很慢，因为Anaconda.org的服务器在国外。所幸的是，清华TUNA镜像源有Anaconda仓库的镜像，我们将其加入conda的配置即可：</span><br><span class="line"># 添加Anaconda的TUNA镜像</span><br><span class="line">conda config —add channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br><span class="line"># TUNA的help中镜像地址加有引号，需要去掉</span><br><span class="line"># 设置搜索时显示通道地址</span><br><span class="line">conda config —set show_channel_urls yes</span><br><span class="line"># 添加Anaconda的TUNA镜像</span><br><span class="line">conda config —add channels https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;anaconda&#x2F;pkgs&#x2F;free&#x2F;</span><br><span class="line"># TUNA的help中镜像地址加有引号，需要去掉</span><br><span class="line"># 设置搜索时显示通道地址</span><br><span class="line">conda config —set show_channel_urls yes</span><br></pre></td></tr></table></figure><blockquote><p>执行完上述命令后，会生成<br>~/.condarc<br>(Linux/Mac)或<br>C:UsersUSER_NAME.condarc<br>文件，记录着我们对conda的配置，直接手动创建、编辑该文件是相同的效果。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux的基本终端命令</title>
      <link href="/posts/55266/"/>
      <url>/posts/55266/</url>
      
        <content type="html"><![CDATA[<p>Linux终端的基本命令 (Unix下基本一致)</p><a id="more"></a><blockquote><ul><li>shell 提示符<br><code>username@hostname:direction$</code></li><li>shell命令格式<br><code>command [option] [arguments]</code><blockquote><p>按一次tab补全文件名<br>按两次tab补全命令<br>单击右键粘贴</p></blockquote></li></ul></blockquote><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><ul><li><p>帮助命令</p><ul><li>man 查看man手册</li><li>info 查看info手册</li><li>—help </li></ul></li><li><p>目录</p><ul><li>根目录 /</li><li>.代表目录自己 ..代表目录的父目录，对于根目录.和..都代表自己</li><li>pwd 查询当前目录路径</li><li>～ 引用当前用户的主目录</li><li>绝对路径<code>/home/hxy/hello.txt</code></li><li>相对路径<code>./hello.txt</code></li></ul></li><li><p>文件与目录相关命令</p><ul><li><p>ls 显示目录内容</p><ul><li>ls -la 列出所有文件，包括隐含文件</li><li>ls -dl 仅查看目录属性</li><li>ls -R 递归显示子目录的文件</li><li>ls 文件名/文件夹名 查看文件信息</li><li>ls -l 详细结果<blockquote><p>详细结果：<code>drwx------ 14 student student 409611...</code><br>第一个字符表示文件类型：-普通文件 d目录 l符号链接 b块设备文件 c字符设备文件<br>后面9个字符表示文件的访问权限：</p><ul><li>第一组表示文件属主的权限</li><li>第二组表示同组用户的权限</li><li>第三组表示其他用户的权限<br>各权限如下</li><li>r 读</li><li>w 写</li><li>x 执行，对于目录表示进入</li></ul></blockquote></li></ul></li><li><p>cd 切换工作目录</p><ul><li>cd .. 进入上一级目录</li><li>cd ~ 或 cd 进入用户主目录</li></ul></li><li><p>mv [options] 源文件/文件夹 目标文件/文件夹</p></li><li><p>cp 复制文件或目录</p><ul><li>cp -a 拷贝目录，保留一切链接和属性</li><li>cp -f 覆盖已经存在的目标文件而不提示</li><li>cp -R 递归复制目录下的所有字目录和文件</li></ul></li><li><p>mkdir 创建一个目录</p><ul><li>mkdir -m 对新建目录设置存取权限（chmod）</li><li>mkdir -p 自动补全不存在的上级目录</li></ul></li><li><p>rmdir 删除空目录</p><ul><li>rmdir -p 递归删除目录</li></ul></li><li><p>rm 删除</p><ul><li>rm -r 递归删除（等同rmdir）</li><li>rm -i 删除一个文件</li><li>rm -f 不询问，直接删除</li></ul></li><li><p>file 确定文件类型</p></li><li><p>cat 链接或显示文件内容</p><ul><li>带行数 cat -n 等价于nl</li></ul></li><li><p>tac  从最后一行开始显示文件内容</p></li><li><p>more/less</p></li><li><p>head/tail</p></li><li><p>touch 新建文件</p></li><li><p>nl 按输出行号的方式显示文件</p></li><li><p>ln 为一个文件在另一个位置建立符号链接</p><ul><li><code>ln -s 目标 目录</code> 软连接，<a href="">一个指向源文件名的连接文件</a>，类似快捷方式</li><li><code>ln 目标 目录</code> 硬连接 类似指针</li></ul></li></ul></li><li><p>字符</p><ul><li>grep 定位字符信息</li><li>wc 统计字符信息</li><li>sort 排序字符信息</li></ul></li><li><p>打包/压缩文件</p><ul><li>打包：把所有文件合并在一个tar文件里</li><li>压缩 使用gzip(tar.gz/tgz)或biz2(tar.bz2)压缩<br><em>.gz比较快，压缩率不如bz2</em></li><li>-c 创建tar文件 -f将文件打包生成到一个文件</li><li><code>tar -cf new.tar ./home/se</code></li><li><code>tar -xf new.tar</code> 解包</li><li>对于zip格式：tar cvzf 打包 tar xvzf解包</li><li>对于biz2格式： tar cvjf 打包 tar xvjf解包</li></ul></li></ul><h2 id="用户管理及网络设置"><a href="#用户管理及网络设置" class="headerlink" title="用户管理及网络设置"></a>用户管理及网络设置</h2><h2 id="GCC编译器"><a href="#GCC编译器" class="headerlink" title="GCC编译器"></a>GCC编译器</h2><p><strong>gcc支持的源码格式：</strong>.c .cpp .m（Objective-C源程序） .i（预处理后的c文件） .ii（预处理后的c++文件） .s/.S（汇编语言源程序） .h（预处理器文件） .o（目标文件）</p><h4 id="单个源码"><a href="#单个源码" class="headerlink" title="单个源码"></a>单个源码</h4><ul><li><p><code>gcc hello.c -o hello</code> 把hello.c编译成一个可执行程序hello（一次性完成四步）</p></li><li><p><code>gcc hello.c</code>不指定输出名，生成一个a.out</p></li><li><p>源文件到可执行文件的编译过程：</p><ul><li><p>预处理 <code>gcc -E hello.c -o hello.i</code></p></li><li><p>编译：将源代码编译成汇编代码 <code>gcc -S hello.i -o hello.s</code></p></li><li><p>汇编：将汇编代码汇编成目标文件 <code>gcc -c hello.s -o hello.o</code></p></li><li><p>链接：将目标代码和所需要库链成一个完整的应用程序 <code>gcc hello.o -o hello</code></p><blockquote><p>gcc的结果输出于后缀名，只和输出参数有关</p></blockquote></li></ul></li></ul><h4 id="多个源码"><a href="#多个源码" class="headerlink" title="多个源码"></a>多个源码</h4><ul><li>一般先将源代码编译成目标代码，最后一次链接成可执行程序</li><li>对于有头文件在多个目录，需要在编译时多次使用-I参数加入头文件所在目录<br>例如a.c需要用到/usr，当前目录/home<br><code>gcc -I -I/usr -I/home -c a.c</code></li><li>对于多个源文件组成的程序。可以把多个文件在一句里编译，但建议不这样做，建议使用makefile脚本来调用gcc构造，见下一节<br><code>gcc a.c b.c d.c -o test</code></li></ul><h4 id="gcc的选项"><a href="#gcc的选项" class="headerlink" title="gcc的选项"></a>gcc的选项</h4><ul><li>宏macro<ul><li>-Dmacro <code>gcc test.c -DPRINTF=printf -o test</code></li><li>-Dmacro=defn <code>gcc test.c -DNUM=10 -o test</code></li></ul></li><li><code>gcc -Wall a.c -o a</code>打开所有编译警告</li><li><code>gcc -Wall -Werror a.c -o a</code>将警告视作错误，出现任何警告就放弃编译</li><li><code>gcc -w</code>禁止输出警告</li></ul><h4 id="gcc使用的第三方库"><a href="#gcc使用的第三方库" class="headerlink" title="gcc使用的第三方库"></a>gcc使用的第三方库</h4><h2 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h2><h4 id="make的调用"><a href="#make的调用" class="headerlink" title="make的调用"></a>make的调用</h4><ul><li><p>直接执行make，自动查找当前目录下名为makefile的文件，并自动从第一个target开始执行</p></li><li><p>如果makefile脚本名称不是缺省名称，使用-f参数来表示<br><code>make -f hello.mk</code></p></li><li><p>如果需要make查找其他目录下的makefile，使用-C参数<br><code>make -C /home</code></p></li><li><p>在makefile中以target表示不同的编译部分，可以在命令行直接写target名称，用于一个活多个target的编译<br><code>make install</code><br><code>make target1 target2</code></p></li></ul><blockquote><h4 id="makefile的格式"><a href="#makefile的格式" class="headerlink" title="makefile的格式"></a>makefile的格式</h4><p>makefile由由一组依赖关系和规则构成</p><p>每个依赖关系由一个目标（即将要创建的文件）和它依赖的源文件组成</p><p>规则描述了怎样从源文件创建出目标文件</p><p><strong>规则也称为target</strong></p><ul><li><p>规则 <code>目标名称：[依赖对象]&lt;tab&gt;命令列表</code></p><ul><li>目标名称是需要创建的结果的名称</li><li>依赖对象表示创建这个目标之前必须预先创建的其他目标，可以是另一个规则的名称，也可以是基本文件的名称</li><li>命令列表表示为了创建这个目标，需要执行那些shell命令可以是一行或多行shell命令，每一行命令行的行首必须是一个tab</li><li>行首必须是tab不能是空格，否则makefile出错</li><li>如果命令行过长，可用\分行，新行无需tab打头<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 要想生成hello.o目标，必须先有hello.c，然后调用gcc编译生成hello.o，依赖对象hello.c可以省略</span></span><br><span class="line"><span class="section">hello.o: hello.c</span></span><br><span class="line">gcc -c hello.c -o hello.o</span><br><span class="line"><span class="comment"># 要想生成执行程序hello，必须先执行规则hello.o，然后调用命令行gcc连接生成hello</span></span><br><span class="line"><span class="section">hello: hello.o</span></span><br><span class="line">gcc hello.o -o hello</span><br></pre></td></tr></table></figure></li></ul></li><li><p>makefile里规则的前后顺序不太重要，实际调用顺序取决目标之间的依赖关系，因此make采用逆推的方式来判断和执行目标*</p></li><li><p>伪目标phony target：一般的目标最终是为了生成一个文件，但有一些目标可以不生成结果文件，只是为了调用命令或依赖对象，具体动作需要需要开发者自行编写</p><ul><li>all 编译所有目标</li><li>clean 清楚项目生成的中间文件和最终生成文件</li><li>install 项目如何安装</li><li>uninstall 项目如何卸载</li></ul></li></ul></blockquote><h4 id="makefile基本结构"><a href="#makefile基本结构" class="headerlink" title="makefile基本结构"></a>makefile基本结构</h4><p>makefile一般包含：</p><ul><li>需要由make工具创建的项目，通常是目标文件和可执行文件，它们一般被称为target</li><li>要创建的目标依赖于哪些文件</li><li>创建每个目标时需要运行的的命令，命令之间用tab打头</li><li>通常包含的固定伪目标</li><li>#表示注释行<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Makefile for exp2</span></span><br><span class="line"><span class="section">main: main.o add.o del.o modify.o</span></span><br><span class="line">gcc -o main main.o add.o del.o modify.o</span><br><span class="line"><span class="section">main.o: main.c</span></span><br><span class="line">gcc -c main.c</span><br><span class="line"><span class="section">add.o: add.c</span></span><br><span class="line">gcc -c add.c</span><br><span class="line"><span class="section">del.o: del.c</span></span><br><span class="line">gcc -c del.c</span><br><span class="line"><span class="section">modify.o: modify.c</span></span><br><span class="line">gcc -c modify.c</span><br></pre></td></tr></table></figure></li></ul><h4 id="makefile扩展用法"><a href="#makefile扩展用法" class="headerlink" title="makefile扩展用法"></a>makefile扩展用法</h4><ul><li>变量（宏）：利用简单的变量定义冗长的编译选项，引用时需要添加$符号<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define macros for name of compiler </span></span><br><span class="line">CC = gcc</span><br><span class="line"><span class="comment"># Define a macro for the CC flags </span></span><br><span class="line">CCFLAGS = -D_DEBUG -g -m486</span><br><span class="line"><span class="comment"># A rule for building a object file </span></span><br><span class="line"><span class="section">test.o: test.c test.h</span></span><br><span class="line"><span class="variable">$(CC)</span> -c <span class="variable">$(CCFLAGS)</span> test.c</span><br></pre></td></tr></table></figure><blockquote><p>makefile变量定义，=两边一定要有空格</p><p>makefile的变量定义要独立在规则之外，一般在最前</p></blockquote></li><li>GNU make的预定义变量<ul><li>$&lt; 第一个依赖文件的名称</li><li>$@ 目标的完整名称</li><li>$^ 所有的依赖文件，以空格分开，不包含重复的</li><li>AR 归档维护程序的名称，默认值ar ARFLAGS 归档维护程序的选项</li><li>AS 汇编程序的名称，默认值as ASGLAGS 汇编程序的选项</li><li>CC c编译器的名称，默认值cc CCFLAGS c编译器的选项 <figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#makefile2 for exp</span></span><br><span class="line"><span class="section">main: main.o add.o del.o modify.o</span></span><br><span class="line">gcc -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"><span class="section">main.o: main.c</span></span><br><span class="line">gcc -c <span class="variable">$&lt;</span></span><br><span class="line"><span class="section">add.o: add.c</span></span><br><span class="line">gcc -c <span class="variable">$&lt;</span></span><br><span class="line"><span class="section">del.o: del.c</span></span><br><span class="line">gcc -c <span class="variable">$&lt;</span></span><br><span class="line"><span class="section">modify.o: modify.c</span></span><br><span class="line">gcc -c <span class="variable">$&lt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li>自动化变量使用<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#makefile2 for exp</span></span><br><span class="line"><span class="section">main: main.o add.o del.o modify.o</span></span><br><span class="line">gcc -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"><span class="section">.c.0:</span></span><br><span class="line">gcc -c <span class="variable">$&lt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="隐含规则"><a href="#隐含规则" class="headerlink" title="隐含规则"></a>隐含规则</h4><p>GNU make的一些内置的隐含规则定义了如何从不同依赖文件建立特定类型的目标文件</p><ul><li>后缀规则suffix rule<br>将一个具有某个后缀的文件转换为具有另一后缀的文件<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">.c.0:</span></span><br><span class="line"><span class="variable">$(CC)</span> <span class="variable">$(CCFLAGS)</span> -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span></span><br></pre></td></tr></table></figure></li><li>模式规则pattern rules<br>在目标的前面多一个%，同时可用来定义目标和依赖文件之间的关系<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">%.o:%.c:</span></span><br><span class="line"><span class="variable">$(CC)</span> <span class="variable">$(CCFLAGS)</span> -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="makefile目标编译"><a href="#makefile目标编译" class="headerlink" title="makefile目标编译"></a>makefile目标编译</h4><p>如果不指定目标，make会默认第一个target<br>规范的makefile文件有以下常见的几个目标：</p><ul><li>make all 编译所有目标</li><li>make clean 在编译结束后删除.o文件</li><li>make install 编译结束后将最终的可执行文件安装到系统的某一个位置<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#makefile for example</span></span><br><span class="line"><span class="section">example: example.o add.o modify.o delete.o</span></span><br><span class="line"><span class="variable">$(CC)</span> -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"><span class="section">.c.o:</span></span><br><span class="line"><span class="variable">$(CC)</span> -c <span class="variable">$&lt;</span></span><br><span class="line"><span class="section">all: example</span></span><br><span class="line"><span class="section">clean: all</span></span><br><span class="line">rm -f *.o</span><br><span class="line"><span class="section">install: clean</span></span><br><span class="line">cp example /usr/local/bin</span><br></pre></td></tr></table></figure></li></ul><h2 id="GDB调试器和调试方法"><a href="#GDB调试器和调试方法" class="headerlink" title="GDB调试器和调试方法"></a>GDB调试器和调试方法</h2><h4 id="gdb的使用"><a href="#gdb的使用" class="headerlink" title="gdb的使用"></a>gdb的使用</h4><p>为使程序能被调试，需要gcc编译时用-g选项为程序编译时添加调试信息<br><code>gcc -g -o helloworld helloworld.c</code><br>然后在命令行键入gdb并回车就可以运行了</p><h4 id="gdb命令"><a href="#gdb命令" class="headerlink" title="gdb命令"></a>gdb命令</h4><ul><li><p>file 装入想要调试的可执行文件。</p></li><li><p>kill 终止正在调试的程序。</p></li><li><p>list 列出产生执行文件的源代码的一部分。</p></li><li><p>next 执行一行源代码但不进入函数内部。</p></li><li><p>step 执行一行源代码而且进入函数内部。</p></li><li><p>run 执行当前被调试的程序。</p></li><li><p>c 继续运行程序。</p></li><li><p>quit 终止gdb。</p></li><li><p>watch 使你能监视一个变量的值而不管它何时被改变。</p></li><li><p>backtrace 栈跟踪，查出代码被谁调用。</p></li><li><p>print 查看变量的值。</p></li><li><p>make 使你能不退出gdb就可以重新产生可执行文件。</p></li><li><p>shell  使你能不离开gdb就执行UNIX shell命令。</p></li><li><p>whatis 显示变量或函数类型。</p></li><li><p>break 在代码里设断点，这将使程序执行到这里时被挂起。</p><ul><li>break linenum 根据行号设置断点</li><li>break funcname 根据函数名设置断电</li><li>break filename:linenum/funcname 执行非当前源文件的某行或某函数的时候停止执行</li><li>break linenum/funcname if expr 根据条件停止程序执行</li></ul></li><li><p>info break 显示当前断点清单，包括到达断点处的次数等。</p></li><li><p>info files 显示被调试文件的详细信息。</p></li><li><p>info func 显示所有的函数名称。</p></li><li><p>info local 显示当函数中的局部变量信息。</p></li><li><p>info prog 显示被调试程序的执行状态。</p></li><li><p>delete [n] 删除第n个断点。</p></li><li><p>disable[n] 关闭第n个断点。</p></li><li><p>enable[n] 开启第n个断点。</p></li><li><p>ptype 显示结构定义。</p></li><li><p>set variable 设置变量的值。</p></li><li><p>call name(args)  调用并执行名为name，参数为args的函数。</p></li><li><p>Finish 终止当前函数并输出返回值。</p></li><li><p>return value 停止当前函数并返回value给调用者。</p></li></ul><h1 id="GTK"><a href="#GTK" class="headerlink" title="GTK"></a>GTK</h1>]]></content>
      
      
      <categories>
          
          <category> Code </category>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Terminal </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    
  
  
</search>
